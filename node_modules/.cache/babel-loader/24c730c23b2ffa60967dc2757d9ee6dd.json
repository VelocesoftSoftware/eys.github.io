{"ast":null,"code":"import{useState,useEffect}from\"react\";import{MapContainer,TileLayer}from\"react-leaflet\";import styles from\"./random-marker-in-map-bounds.module.css\";import L from\"leaflet\";import tileLayer from\"../util/tileLayer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const center=[52.22977,21.01178];// RandomMarkerInMapBounds\nconst RandomMarkerInMapBounds=_ref=>{let{map}=_ref;useEffect(()=>{if(!map)return;const legend=L.control({position:\"bottomleft\"});legend.onAdd=function(){let div=L.DomUtil.create(\"div\",\"description\");L.DomEvent.disableClickPropagation(div);const text=\"Dynamic generation of 30 markers in the map view\";div.insertAdjacentHTML(\"beforeend\",text);return div;};legend.addTo(map);// add \"random\" button\nconst buttonTemplate='<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><path d=\"M24 22h-3.172l-5-5 5-5h3.172v5l7-7-7-7v5h-4c-0.53 0-1.039 0.211-1.414 0.586l-5.586 5.586-5.586-5.586c-0.375-0.375-0.884-0.586-1.414-0.586h-6v4h5.172l5 5-5 5h-5.172v4h6c0.53 0 1.039-0.211 1.414-0.586l5.586-5.586 5.586 5.586c0.375 0.375 0.884 0.586 1.414 0.586h4v5l7-7-7-7v5z\" /></svg>';// create custom button\nconst customControl=L.Control.extend({// button position\noptions:{position:\"topleft\",title:\"random marker\",className:styles.leafletRandomMarker},// method\nonAdd:function(map){this._map=map;return this._initialLayout();},_initialLayout:function(){// create button\nconst container=L.DomUtil.create(\"div\",\"leaflet-bar \"+this.options.className);this._container=container;L.DomEvent.disableClickPropagation(container);container.title=this.options.title;container.innerHTML=buttonTemplate;// action when clik on button\n// clear and add radnom marker\nL.DomEvent.on(container,\"mousedown dblclic\",L.DomEvent.stopPropagation).on(container,\"click\",L.DomEvent.stop).on(container,\"click\",removeMarkers).on(container,\"click\",randomMarker);return this._container;}});// adding new button to map controll\nmap.addControl(new customControl());// random color\n// ------------------------------\nconst randomColor=()=>Math.floor(Math.random()*16777215).toString(16);// create legend\n// ------------------------------\n// add feature group to map\nconst fg=L.featureGroup().addTo(map);// create random marker\nfunction randomMarker(){// get bounds of map\nconst bounds=map.getBounds();let southWest=bounds.getSouthWest();let northEast=bounds.getNorthEast();let lngSpan=northEast.lng-southWest.lng;let latSpan=northEast.lat-southWest.lat;let allPoints=[];// generate random points and add to array 'allPoints'\nfor(let i=0;i<30;i++){let points=[southWest.lat+latSpan*Math.random(),southWest.lng+lngSpan*Math.random()];allPoints.push(points);}// add markers to feature group\nfor(let i=0;i<allPoints.length;i++){L.marker(allPoints[i],{icon:L.divIcon({className:\"custom-icon-marker\",iconSize:L.point(40,40),html:\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" class=\\\"marker\\\"><path fill-opacity=\\\"0.25\\\" d=\\\"M16 32s1.427-9.585 3.761-12.025c4.595-4.805 8.685-.99 8.685-.99s4.044 3.964-.526 8.743C25.514 30.245 16 32 16 32z\\\"/><path stroke=\\\"#fff\\\" fill=\\\"#\".concat(randomColor(),\"\\\" d=\\\"M15.938 32S6 17.938 6 11.938C6 .125 15.938 0 15.938 0S26 .125 26 11.875C26 18.062 15.938 32 15.938 32zM16 6a4 4 0 100 8 4 4 0 000-8z\\\"/></svg>\"),iconAnchor:[12,24],popupAnchor:[9,-26]})}).bindPopup(\"<b>Marker coordinates</b>:<br>\".concat(allPoints[i].toString())).addTo(fg);}// zoom to feature group and add padding\nmap.fitBounds(fg.getBounds(),{padding:[20,20]});}//  remove markers from feature group\nfunction removeMarkers(){fg.clearLayers();}// initialize random marker\nrandomMarker();},[map]);return null;};const MapWrapper=()=>{const[map,setMap]=useState(null);return/*#__PURE__*/_jsxs(MapContainer,{whenCreated:setMap,center:center,zoom:18,scrollWheelZoom:false,children:[/*#__PURE__*/_jsx(TileLayer,{...tileLayer}),/*#__PURE__*/_jsx(RandomMarkerInMapBounds,{map:map})]});};export default MapWrapper;","map":{"version":3,"names":["useState","useEffect","MapContainer","TileLayer","styles","L","tileLayer","jsx","_jsx","jsxs","_jsxs","center","RandomMarkerInMapBounds","_ref","map","legend","control","position","onAdd","div","DomUtil","create","DomEvent","disableClickPropagation","text","insertAdjacentHTML","addTo","buttonTemplate","customControl","Control","extend","options","title","className","leafletRandomMarker","_map","_initialLayout","container","_container","innerHTML","on","stopPropagation","stop","removeMarkers","randomMarker","addControl","randomColor","Math","floor","random","toString","fg","featureGroup","bounds","getBounds","southWest","getSouthWest","northEast","getNorthEast","lngSpan","lng","latSpan","lat","allPoints","i","points","push","length","marker","icon","divIcon","iconSize","point","html","concat","iconAnchor","popupAnchor","bindPopup","fitBounds","padding","clearLayers","MapWrapper","setMap","whenCreated","zoom","scrollWheelZoom","children"],"sources":["/Users/berkanium/Desktop/eys-react-leaflet/src/pages/random-marker-in-map-bounds.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { MapContainer, TileLayer } from \"react-leaflet\";\nimport styles from \"./random-marker-in-map-bounds.module.css\";\nimport L from \"leaflet\";\nimport tileLayer from \"../util/tileLayer\";\n\nconst center = [52.22977, 21.01178];\n\n// RandomMarkerInMapBounds\nconst RandomMarkerInMapBounds = ({ map }) => {\n  useEffect(() => {\n    if (!map) return;\n\n    const legend = L.control({ position: \"bottomleft\" });\n\n    legend.onAdd = function () {\n      let div = L.DomUtil.create(\"div\", \"description\");\n      L.DomEvent.disableClickPropagation(div);\n      const text = \"Dynamic generation of 30 markers in the map view\";\n      div.insertAdjacentHTML(\"beforeend\", text);\n      return div;\n    };\n\n    legend.addTo(map);\n\n    // add \"random\" button\n    const buttonTemplate =\n      '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><path d=\"M24 22h-3.172l-5-5 5-5h3.172v5l7-7-7-7v5h-4c-0.53 0-1.039 0.211-1.414 0.586l-5.586 5.586-5.586-5.586c-0.375-0.375-0.884-0.586-1.414-0.586h-6v4h5.172l5 5-5 5h-5.172v4h6c0.53 0 1.039-0.211 1.414-0.586l5.586-5.586 5.586 5.586c0.375 0.375 0.884 0.586 1.414 0.586h4v5l7-7-7-7v5z\" /></svg>';\n\n    // create custom button\n    const customControl = L.Control.extend({\n      // button position\n      options: {\n        position: \"topleft\",\n        title: \"random marker\",\n        className: styles.leafletRandomMarker,\n      },\n\n      // method\n      onAdd: function (map) {\n        this._map = map;\n        return this._initialLayout();\n      },\n\n      _initialLayout: function () {\n        // create button\n        const container = L.DomUtil.create(\n          \"div\",\n          \"leaflet-bar \" + this.options.className\n        );\n        this._container = container;\n\n        L.DomEvent.disableClickPropagation(container);\n\n        container.title = this.options.title;\n        container.innerHTML = buttonTemplate;\n\n        // action when clik on button\n        // clear and add radnom marker\n        L.DomEvent.on(\n          container,\n          \"mousedown dblclic\",\n          L.DomEvent.stopPropagation\n        )\n          .on(container, \"click\", L.DomEvent.stop)\n          .on(container, \"click\", removeMarkers)\n          .on(container, \"click\", randomMarker);\n\n        return this._container;\n      },\n    });\n\n    // adding new button to map controll\n    map.addControl(new customControl());\n\n    // random color\n    // ------------------------------\n    const randomColor = () => Math.floor(Math.random() * 16777215).toString(16);\n\n    // create legend\n    // ------------------------------\n\n    // add feature group to map\n    const fg = L.featureGroup().addTo(map);\n\n    // create random marker\n    function randomMarker() {\n      // get bounds of map\n      const bounds = map.getBounds();\n\n      let southWest = bounds.getSouthWest();\n      let northEast = bounds.getNorthEast();\n      let lngSpan = northEast.lng - southWest.lng;\n      let latSpan = northEast.lat - southWest.lat;\n\n      let allPoints = [];\n\n      // generate random points and add to array 'allPoints'\n      for (let i = 0; i < 30; i++) {\n        let points = [\n          southWest.lat + latSpan * Math.random(),\n          southWest.lng + lngSpan * Math.random(),\n        ];\n        allPoints.push(points);\n      }\n\n      // add markers to feature group\n      for (let i = 0; i < allPoints.length; i++) {\n        L.marker(allPoints[i], {\n          icon: L.divIcon({\n            className: \"custom-icon-marker\",\n            iconSize: L.point(40, 40),\n            html: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" class=\"marker\"><path fill-opacity=\"0.25\" d=\"M16 32s1.427-9.585 3.761-12.025c4.595-4.805 8.685-.99 8.685-.99s4.044 3.964-.526 8.743C25.514 30.245 16 32 16 32z\"/><path stroke=\"#fff\" fill=\"#${randomColor()}\" d=\"M15.938 32S6 17.938 6 11.938C6 .125 15.938 0 15.938 0S26 .125 26 11.875C26 18.062 15.938 32 15.938 32zM16 6a4 4 0 100 8 4 4 0 000-8z\"/></svg>`,\n            iconAnchor: [12, 24],\n            popupAnchor: [9, -26],\n          }),\n        })\n          .bindPopup(`<b>Marker coordinates</b>:<br>${allPoints[i].toString()}`)\n          .addTo(fg);\n      }\n\n      // zoom to feature group and add padding\n      map.fitBounds(fg.getBounds(), { padding: [20, 20] });\n    }\n\n    //  remove markers from feature group\n    function removeMarkers() {\n      fg.clearLayers();\n    }\n\n    // initialize random marker\n    randomMarker();\n  }, [map]);\n\n  return null;\n};\n\nconst MapWrapper = () => {\n  const [map, setMap] = useState(null);\n\n  return (\n    <MapContainer\n      whenCreated={setMap}\n      center={center}\n      zoom={18}\n      scrollWheelZoom={false}\n    >\n      <TileLayer {...tileLayer} />\n\n      <RandomMarkerInMapBounds map={map} />\n    </MapContainer>\n  );\n};\n\nexport default MapWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}