{"ast":null,"code":"import{useRef,useState,useEffect}from\"react\";import{MapContainer,TileLayer,ZoomControl,Marker,Popup}from\"react-leaflet\";import L from\"leaflet\";import styles from\"./fitBounds-with-padding.module.css\";import tileLayer from\"../util/tileLayer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const center=[52.22977,21.01178];const infoText=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati a deserunt distinctio vitae! Dolores officiis animi ab ut officia consequuntur fuga, possimus et eligendi, facilis libero nulla repellat modi magnam!\";const MapWrapper=()=>{const infoRef=useRef(0);const[map,setMap]=useState(null);useEffect(()=>{if(!map)return;const ref=infoRef.current.offsetWidth;const visibleMarkers=[];map.eachLayer(layer=>{if(layer instanceof L.Marker){visibleMarkers.push(layer);}});const featureGroup=L.featureGroup(visibleMarkers).getBounds();function handleResize(){map.fitBounds(featureGroup,{paddingTopLeft:[ref+10,10]});}handleResize();window.addEventListener(\"resize\",handleResize);return _=>{window.removeEventListener(\"resize\",handleResize);};},[map]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapper,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.info,ref:infoRef,children:infoText}),/*#__PURE__*/_jsxs(MapContainer,{whenCreated:setMap,center:center,zoom:18,zoomControl:false,scrollWheelZoom:false,children:[/*#__PURE__*/_jsx(ZoomControl,{position:\"topright\"}),/*#__PURE__*/_jsx(TileLayer,{...tileLayer}),/*#__PURE__*/_jsx(Marker,{position:center,children:/*#__PURE__*/_jsx(Popup,{children:\"Center Warsaw\"})})]})]});};export default MapWrapper;","map":{"version":3,"names":["useRef","useState","useEffect","MapContainer","TileLayer","ZoomControl","Marker","Popup","L","styles","tileLayer","jsx","_jsx","jsxs","_jsxs","center","infoText","MapWrapper","infoRef","map","setMap","ref","current","offsetWidth","visibleMarkers","eachLayer","layer","push","featureGroup","getBounds","handleResize","fitBounds","paddingTopLeft","window","addEventListener","_","removeEventListener","className","wrapper","children","info","whenCreated","zoom","zoomControl","scrollWheelZoom","position"],"sources":["/Users/berkanium/Desktop/eys-react-leaflet/src/pages/fitBounds-with-padding.js"],"sourcesContent":["import { useRef, useState, useEffect } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  ZoomControl,\n  Marker,\n  Popup,\n} from \"react-leaflet\";\nimport L from \"leaflet\";\nimport styles from \"./fitBounds-with-padding.module.css\";\nimport tileLayer from \"../util/tileLayer\";\n\nconst center = [52.22977, 21.01178];\n\nconst infoText =\n  \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati a deserunt distinctio vitae! Dolores officiis animi ab ut officia consequuntur fuga, possimus et eligendi, facilis libero nulla repellat modi magnam!\";\n\nconst MapWrapper = () => {\n  const infoRef = useRef(0);\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (!map) return;\n\n    const ref = infoRef.current.offsetWidth;\n\n    const visibleMarkers = [];\n    map.eachLayer((layer) => {\n      if (layer instanceof L.Marker) {\n        visibleMarkers.push(layer);\n      }\n    });\n\n    const featureGroup = L.featureGroup(visibleMarkers).getBounds();\n\n    function handleResize() {\n      map.fitBounds(featureGroup, {\n        paddingTopLeft: [ref + 10, 10],\n      });\n    }\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return (_) => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [map]);\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.info} ref={infoRef}>\n        {infoText}\n      </div>\n      <MapContainer\n        whenCreated={setMap}\n        center={center}\n        zoom={18}\n        zoomControl={false}\n        scrollWheelZoom={false}\n      >\n        <ZoomControl position={\"topright\"} />\n\n        <TileLayer {...tileLayer} />\n\n        <Marker position={center}>\n          <Popup>Center Warsaw</Popup>\n        </Marker>\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default MapWrapper;\n"],"mappings":"AAAA,OAASA,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACnD,OACEC,YAAY,CACZC,SAAS,CACTC,WAAW,CACXC,MAAM,CACNC,KAAK,KACA,eAAe,CACtB,MAAO,CAAAC,CAAC,KAAM,SAAS,CACvB,MAAO,CAAAC,MAAM,KAAM,qCAAqC,CACxD,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,KAAM,CAAAC,MAAM,CAAG,CAAC,QAAQ,CAAE,QAAQ,CAAC,CAEnC,KAAM,CAAAC,QAAQ,CACZ,0NAA0N,CAE5N,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,OAAO,CAAGlB,MAAM,CAAC,CAAC,CAAC,CACzB,KAAM,CAACmB,GAAG,CAAEC,MAAM,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAEpCC,SAAS,CAAC,IAAM,CACd,GAAI,CAACiB,GAAG,CAAE,OAEV,KAAM,CAAAE,GAAG,CAAGH,OAAO,CAACI,OAAO,CAACC,WAAW,CAEvC,KAAM,CAAAC,cAAc,CAAG,EAAE,CACzBL,GAAG,CAACM,SAAS,CAAEC,KAAK,EAAK,CACvB,GAAIA,KAAK,WAAY,CAAAlB,CAAC,CAACF,MAAM,CAAE,CAC7BkB,cAAc,CAACG,IAAI,CAACD,KAAK,CAAC,CAC5B,CACF,CAAC,CAAC,CAEF,KAAM,CAAAE,YAAY,CAAGpB,CAAC,CAACoB,YAAY,CAACJ,cAAc,CAAC,CAACK,SAAS,CAAC,CAAC,CAE/D,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtBX,GAAG,CAACY,SAAS,CAACH,YAAY,CAAE,CAC1BI,cAAc,CAAE,CAACX,GAAG,CAAG,EAAE,CAAE,EAAE,CAC/B,CAAC,CAAC,CACJ,CAEAS,YAAY,CAAC,CAAC,CAEdG,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAEJ,YAAY,CAAC,CAE/C,MAAQ,CAAAK,CAAC,EAAK,CACZF,MAAM,CAACG,mBAAmB,CAAC,QAAQ,CAAEN,YAAY,CAAC,CACpD,CAAC,CACH,CAAC,CAAE,CAACX,GAAG,CAAC,CAAC,CAET,mBACEL,KAAA,QAAKuB,SAAS,CAAE5B,MAAM,CAAC6B,OAAQ,CAAAC,QAAA,eAC7B3B,IAAA,QAAKyB,SAAS,CAAE5B,MAAM,CAAC+B,IAAK,CAACnB,GAAG,CAAEH,OAAQ,CAAAqB,QAAA,CACvCvB,QAAQ,CACN,CAAC,cACNF,KAAA,CAACX,YAAY,EACXsC,WAAW,CAAErB,MAAO,CACpBL,MAAM,CAAEA,MAAO,CACf2B,IAAI,CAAE,EAAG,CACTC,WAAW,CAAE,KAAM,CACnBC,eAAe,CAAE,KAAM,CAAAL,QAAA,eAEvB3B,IAAA,CAACP,WAAW,EAACwC,QAAQ,CAAE,UAAW,CAAE,CAAC,cAErCjC,IAAA,CAACR,SAAS,KAAKM,SAAS,CAAG,CAAC,cAE5BE,IAAA,CAACN,MAAM,EAACuC,QAAQ,CAAE9B,MAAO,CAAAwB,QAAA,cACvB3B,IAAA,CAACL,KAAK,EAAAgC,QAAA,CAAC,eAAa,CAAO,CAAC,CACtB,CAAC,EACG,CAAC,EACZ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,UAAU"},"metadata":{},"sourceType":"module"}