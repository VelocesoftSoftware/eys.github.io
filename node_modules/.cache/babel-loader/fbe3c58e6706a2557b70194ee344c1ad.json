{"ast":null,"code":"var _jsxFileName = \"/Users/berkanium/Desktop/eys-react-leaflet/src/pages/checking-if-the-marker-is-in-viewport.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { Marker, MapContainer, TileLayer, Popup } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport tileLayer from \"../util/tileLayer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst center = [52.22977, 21.01178];\nconst Legend = _ref => {\n  _s();\n  let {\n    map\n  } = _ref;\n  const [view, setView] = useState(true);\n  const markerRef = useRef(null);\n  useEffect(() => {\n    if (!map) return;\n    const legend = L.control({\n      position: \"bottomleft\"\n    });\n    legend.onAdd = () => {\n      legend.div = L.DomUtil.create(\"div\", \"description\");\n      L.DomEvent.disableClickPropagation(legend.div);\n      legend.div.innerHTML = \"We check if the marker is in the page view. Move the marker so that it is outside the map. Marker in view: <b style=\\\"color: \".concat(view ? \"black\" : \"red\", \"\\\">\").concat(view, \"</b>\");\n      return legend.div;\n    };\n    legend.addTo(map);\n    const checkIfMarkerIsInViewport = () => {\n      const mapBounds = map.getBounds();\n      const contains = mapBounds.contains(markerRef.current.getLatLng());\n      setView(contains);\n    };\n    map.on(\"moveend\", checkIfMarkerIsInViewport);\n\n    // remove the legend\n    return () => {\n      legend.remove();\n      map.off(\"moveend\", checkIfMarkerIsInViewport);\n    };\n  }, [map, view]);\n  return /*#__PURE__*/_jsxDEV(Marker, {\n    ref: markerRef,\n    position: center,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: \"Center Warsaw\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(Legend, \"Kt8zX/56I+giBUnVHVEuXZNF5c8=\");\n_c = Legend;\nconst MapWrapper = () => {\n  _s2();\n  const [map, setMap] = useState(null);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    whenCreated: setMap,\n    center: center,\n    zoom: 18,\n    scrollWheelZoom: false,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      ...tileLayer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      map: map\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s2(MapWrapper, \"rxZhgyBNMiWq8Y14QNItnydGNOI=\");\n_c2 = MapWrapper;\nexport default MapWrapper;\nvar _c, _c2;\n$RefreshReg$(_c, \"Legend\");\n$RefreshReg$(_c2, \"MapWrapper\");","map":{"version":3,"names":["useState","useEffect","useRef","Marker","MapContainer","TileLayer","Popup","L","tileLayer","jsxDEV","_jsxDEV","center","Legend","_ref","_s","map","view","setView","markerRef","legend","control","position","onAdd","div","DomUtil","create","DomEvent","disableClickPropagation","innerHTML","concat","addTo","checkIfMarkerIsInViewport","mapBounds","getBounds","contains","current","getLatLng","on","remove","off","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","MapWrapper","_s2","setMap","whenCreated","zoom","scrollWheelZoom","_c2","$RefreshReg$"],"sources":["/Users/berkanium/Desktop/eys-react-leaflet/src/pages/checking-if-the-marker-is-in-viewport.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Marker, MapContainer, TileLayer, Popup } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport tileLayer from \"../util/tileLayer\";\n\nconst center = [52.22977, 21.01178];\n\nconst Legend = ({ map }) => {\n  const [view, setView] = useState(true);\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    if (!map) return;\n\n    const legend = L.control({ position: \"bottomleft\" });\n\n    legend.onAdd = () => {\n      legend.div = L.DomUtil.create(\"div\", \"description\");\n\n      L.DomEvent.disableClickPropagation(legend.div);\n\n      legend.div.innerHTML = `We check if the marker is in the page view. Move the marker so that it is outside the map. Marker in view: <b style=\"color: ${\n        view ? \"black\" : \"red\"\n      }\">${view}</b>`;\n\n      return legend.div;\n    };\n\n    legend.addTo(map);\n\n    const checkIfMarkerIsInViewport = () => {\n      const mapBounds = map.getBounds();\n      const contains = mapBounds.contains(markerRef.current.getLatLng());\n      setView(contains);\n    };\n\n    map.on(\"moveend\", checkIfMarkerIsInViewport);\n\n    // remove the legend\n    return () => {\n      legend.remove();\n      map.off(\"moveend\", checkIfMarkerIsInViewport);\n    };\n  }, [map, view]);\n\n  return (\n    <Marker ref={markerRef} position={center}>\n      <Popup>Center Warsaw</Popup>\n    </Marker>\n  );\n};\n\nconst MapWrapper = () => {\n  const [map, setMap] = useState(null);\n  return (\n    <MapContainer\n      whenCreated={setMap}\n      center={center}\n      zoom={18}\n      scrollWheelZoom={false}\n    >\n      <TileLayer {...tileLayer} />\n\n      <Legend map={map} />\n    </MapContainer>\n  );\n};\n\nexport default MapWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}