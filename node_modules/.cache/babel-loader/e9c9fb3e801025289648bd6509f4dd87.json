{"ast":null,"code":"import{useState,useEffect}from'react';import{Marker,MapContainer,TileLayer,Popup}from'react-leaflet';import L from'leaflet';import tileLayer from'../util/tileLayer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const center=[52.22977,21.01178];const removeMarker=(index,map,legend)=>{map.eachLayer(layer=>{if(layer.options&&layer.options.pane===\"markerPane\"){if(layer.options.uniceid===index){map.removeLayer(layer);legend.textContent='goodbye marker ðŸ’©';}}});};const ShowMarkers=_ref=>{let{mapContainer,legend,markers}=_ref;return markers.map((marker,index)=>{return/*#__PURE__*/_jsx(Marker,{uniceid:index,position:marker,draggable:true,eventHandlers:{moveend(e){const{lat,lng}=e.target.getLatLng();legend.textContent=\"change position: \".concat(lat,\" \").concat(lng);}},children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeMarker(index,mapContainer,legend),children:\"delete marker \\uD83D\\uDC94\"})})},index);});};const MyMarkers=_ref2=>{let{map}=_ref2;const[marker,setMarker]=useState([]);const[legend,setLegend]=useState();useEffect(()=>{if(!map)return;const legend=L.control({position:\"bottomleft\"});const info=L.DomUtil.create(\"div\",\"legend\");legend.onAdd=()=>{info.textContent=\"click on the map, move the marker, click on the marker\";return info;};legend.addTo(map);map.on('click',e=>{const{lat,lng}=e.latlng;setMarker(mar=>[...mar,[lat,lng]]);info.textContent=\"new marker: \".concat(e.latlng);setLegend(info);});},[map]);return marker.length>0&&legend!==undefined?/*#__PURE__*/_jsx(ShowMarkers,{mapContainer:map,legend:legend,markers:marker}):null;};const MapWrapper=()=>{const[map,setMap]=useState(null);return/*#__PURE__*/_jsxs(MapContainer,{whenCreated:setMap,center:center,zoom:18,scrollWheelZoom:false,children:[/*#__PURE__*/_jsx(TileLayer,{...tileLayer}),/*#__PURE__*/_jsx(MyMarkers,{map:map})]});};export default MapWrapper;","map":{"version":3,"names":["useState","useEffect","Marker","MapContainer","TileLayer","Popup","L","tileLayer","jsx","_jsx","jsxs","_jsxs","center","removeMarker","index","map","legend","eachLayer","layer","options","pane","uniceid","removeLayer","textContent","ShowMarkers","_ref","mapContainer","markers","marker","position","draggable","eventHandlers","moveend","e","lat","lng","target","getLatLng","concat","children","onClick","MyMarkers","_ref2","setMarker","setLegend","control","info","DomUtil","create","onAdd","addTo","on","latlng","mar","length","undefined","MapWrapper","setMap","whenCreated","zoom","scrollWheelZoom"],"sources":["/Users/berkanium/Desktop/eys-react-leaflet/src/pages/add-move-and-delete-marker.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Marker, MapContainer, TileLayer, Popup } from 'react-leaflet';\nimport L from 'leaflet';\nimport tileLayer from '../util/tileLayer';\n\nconst center = [52.22977, 21.01178];\n\nconst removeMarker = (index, map, legend) => {\n  map.eachLayer((layer) => {\n    if (layer.options && layer.options.pane === \"markerPane\") {\n      if (layer.options.uniceid === index) {\n        map.removeLayer(layer);\n        legend.textContent = 'goodbye marker ðŸ’©';\n      }\n    }\n  });\n}\n\nconst ShowMarkers = ({ mapContainer, legend, markers }) => {\n  return markers.map((marker, index) => {\n    return <Marker\n      key={index}\n      uniceid={index}\n      position={marker}\n      draggable={true}\n      eventHandlers={{\n        moveend(e) {\n          const { lat, lng } = e.target.getLatLng();\n          legend.textContent = `change position: ${lat} ${lng}`;\n        }\n      }}\n    >\n      <Popup>\n        <button onClick={() => removeMarker(index, mapContainer, legend)}>delete marker ðŸ’”</button>\n      </Popup>\n    </Marker>\n  })\n}\n\nconst MyMarkers = ({ map }) => {\n  const [marker, setMarker] = useState([])\n  const [legend, setLegend] = useState()\n\n  useEffect(() => {\n    if (!map) return;\n    const legend = L.control({ position: \"bottomleft\" });\n\n    const info = L.DomUtil.create(\"div\", \"legend\");\n\n    legend.onAdd = () => {\n      info.textContent = `click on the map, move the marker, click on the marker`;\n      return info;\n    };\n\n    legend.addTo(map);\n\n    map.on('click', (e) => {\n      const { lat, lng } = e.latlng;\n      setMarker(mar => [...mar, [lat, lng]]);\n\n      info.textContent = `new marker: ${e.latlng}`;\n      setLegend(info);\n    })\n\n  }, [map]);\n\n  return marker.length > 0 && legend !== undefined ? (\n    <ShowMarkers\n      mapContainer={map}\n      legend={legend}\n      markers={marker} />\n  )\n    : null\n}\n\nconst MapWrapper = () => {\n  const [map, setMap] = useState(null);\n  return (\n    <MapContainer\n      whenCreated={setMap}\n      center={center}\n      zoom={18}\n      scrollWheelZoom={false}\n    >\n\n      <TileLayer {...tileLayer} />\n\n      <MyMarkers map={map} />\n\n    </MapContainer>\n  )\n}\n\nexport default MapWrapper;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}