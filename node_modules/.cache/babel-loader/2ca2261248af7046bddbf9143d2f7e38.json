{"ast":null,"code":"import{useRef,useEffect,useState}from\"react\";import{MapContainer,useMap,TileLayer,Marker,Popup}from\"react-leaflet\";import styles from\"./controlling-the-map-from-outside-the-map.module.css\";import tileLayer from\"../util/tileLayer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const center=[52.2295,21.01];const points=[{id:\"1\",lat:52.228785157729114,lng:21.006867885589603,title:\"Marker 1\"},{id:\"2\",lat:52.22923201880194,lng:21.00897073745728,title:\"Marker 2\"},{id:\"3\",lat:52.22963944703663,lng:21.01091265678406,title:\"Marker 3\"},{id:\"4\",lat:52.229928587386496,lng:21.01218938827515,title:\"Marker 4\"}];const ListMarkers=_ref=>{let{onItemClick}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:styles.markersList,children:points.map((_ref2,index)=>{let{title}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:styles.markerItem,onClick:e=>{e.preventDefault();onItemClick(index);},children:title},index);})});};const MyMarkers=_ref3=>{let{data,selectedIndex}=_ref3;return data.map((item,index)=>/*#__PURE__*/_jsx(PointMarker,{content:item.title,center:{lat:item.lat,lng:item.lng},openPopup:selectedIndex===index},index));};const PointMarker=_ref4=>{let{center,content,openPopup}=_ref4;const map=useMap();const markerRef=useRef(null);useEffect(()=>{if(openPopup){map.flyToBounds([center]);markerRef.current.openPopup();}},[map,center,openPopup]);return/*#__PURE__*/_jsx(Marker,{ref:markerRef,position:center,children:/*#__PURE__*/_jsx(Popup,{children:content})});};const MapWrapper=()=>{const[selected,setSelected]=useState();function handleItemClick(index){setSelected(index);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MapContainer,{center:center,zoom:16,scrollWheelZoom:false,children:[/*#__PURE__*/_jsx(TileLayer,{...tileLayer}),/*#__PURE__*/_jsx(MyMarkers,{selectedIndex:selected,data:points})]}),/*#__PURE__*/_jsx(ListMarkers,{data:points,onItemClick:handleItemClick})]});};export default MapWrapper;","map":{"version":3,"names":["useRef","useEffect","useState","MapContainer","useMap","TileLayer","Marker","Popup","styles","tileLayer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","center","points","id","lat","lng","title","ListMarkers","_ref","onItemClick","className","markersList","children","map","_ref2","index","markerItem","onClick","e","preventDefault","MyMarkers","_ref3","data","selectedIndex","item","PointMarker","content","openPopup","_ref4","markerRef","flyToBounds","current","ref","position","MapWrapper","selected","setSelected","handleItemClick","zoom","scrollWheelZoom"],"sources":["/Users/berkanium/Desktop/eys-react-leaflet/src/pages/controlling-the-map-from-outside-the-map.js"],"sourcesContent":["import { useRef, useEffect, useState } from \"react\";\nimport { MapContainer, useMap, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport styles from \"./controlling-the-map-from-outside-the-map.module.css\";\nimport tileLayer from \"../util/tileLayer\";\n\nconst center = [52.2295, 21.01];\n\nconst points = [\n  {\n    id: \"1\",\n    lat: 52.228785157729114,\n    lng: 21.006867885589603,\n    title: \"Marker 1\",\n  },\n  {\n    id: \"2\",\n    lat: 52.22923201880194,\n    lng: 21.00897073745728,\n    title: \"Marker 2\",\n  },\n  {\n    id: \"3\",\n    lat: 52.22963944703663,\n    lng: 21.01091265678406,\n    title: \"Marker 3\",\n  },\n  {\n    id: \"4\",\n    lat: 52.229928587386496,\n    lng: 21.01218938827515,\n    title: \"Marker 4\",\n  },\n];\n\nconst ListMarkers = ({ onItemClick }) => {\n  return (\n    <div className={styles.markersList}>\n      {points.map(({ title }, index) => (\n        <div\n          className={styles.markerItem}\n          key={index}\n          onClick={(e) => {\n            e.preventDefault();\n            onItemClick(index);\n          }}\n        >\n          {title}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst MyMarkers = ({ data, selectedIndex }) => {\n  return data.map((item, index) => (\n    <PointMarker\n      key={index}\n      content={item.title}\n      center={{ lat: item.lat, lng: item.lng }}\n      openPopup={selectedIndex === index}\n    />\n  ));\n};\n\nconst PointMarker = ({ center, content, openPopup }) => {\n  const map = useMap();\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    if (openPopup) {\n      map.flyToBounds([center]);\n      markerRef.current.openPopup();\n    }\n  }, [map, center, openPopup]);\n\n  return (\n    <Marker ref={markerRef} position={center}>\n      <Popup>{content}</Popup>\n    </Marker>\n  );\n};\n\nconst MapWrapper = () => {\n  const [selected, setSelected] = useState();\n\n  function handleItemClick(index) {\n    setSelected(index);\n  }\n\n  return (\n    <>\n      <MapContainer center={center} zoom={16} scrollWheelZoom={false}>\n        <TileLayer {...tileLayer} />\n\n        <MyMarkers selectedIndex={selected} data={points} />\n      </MapContainer>\n\n      <ListMarkers data={points} onItemClick={handleItemClick} />\n    </>\n  );\n};\n\nexport default MapWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}